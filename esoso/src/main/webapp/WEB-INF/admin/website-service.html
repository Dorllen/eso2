<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css"
	href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css"
	href="lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->

<title>站点服务</title>
</head>
<body>
	<div class="page-container" style="min-height: 500px">
		<table
			class="table table-border table-bordered table-bg mb-15 table-hover">
			<thead class="text-c">
				<tr>
					<th class="text-l f-18" colspan="10">站点服务管理</th>
				</tr>
				<tr>
					<th>序号</th>
					<th>站点名</th>
					<th>版本号</th>
					<th>创建时间</th>
					<th>创建人</th>
					<th>最近变更时间</th>
					<th>最近变更人</th>
					<th>站点收录数</th>
					<th>描叙</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody class="text-c">
				<tr>
					<td>1</td>
					<td>segmentfault</td>
					<td>0.0.1</td>
					<td>2017-3-28 20:14:16</td>
					<td>Admin</td>
					<td>2017-4-29 14:33:15</td>
					<td>Admin</td>
					<td>108</td>
					<td><abbr title="超出就隐藏内容，我设置！" class="text-overflow"
						style="width: 100px; display: inline-block">超出就隐藏内容，我设置！</abbr></td>
					<td><input class="btn btn-primary radius" type="button"
						value="配置" onclick="updateSettings('0.0.1','segmentfault')">
						<input class="btn radius btn-warning" type="button" value="站点停用"
						onclick="stopUsing('0.0.1','segmentfault')"></td>
				</tr>
			</tbody>
		</table>
		<div id="websiteSetting" class="modal fade" tabindex="-1"
			role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content radius">
					<div class="modal-header">
						<h3 class="modal-title">服務设置</h3>
						<a class="close" data-dismiss="modal" aria-hidden="true"
							href="javascript:void();">×</a>
					</div>
					<form action="#" id="form">
						<div class="modal-body">
							<input type="hidden" name="versionId" value="" autocomplete="off" />
							<input type="hidden" name="name" value="" autocomplete="off" />
							<table class="table table-border table-bordered table-hover">
								<thead>
									<tr>
										<th>服务名称</th>
										<th>开启状态</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>搜索服务</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="searchS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
									<tr>
										<td>在线爬虫服务</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="onlineWormS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
									<tr>
										<td>定时爬虫服务</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="schduleWormS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
									<tr>
										<td>自定义爬虫服务</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="designWormS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
									<tr>
										<td>直接访问</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="noSecS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
									<tr>
										<td>安全访问</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="secS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
									<tr>
										<td>站點分析</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="webAnyS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
									<tr>
										<td>排名服務</td>
										<td><span class="select-box"> <select
												class="select" size="1" name="webSortS">
													<option value="0">否</option>
													<option value="1" selected>是</option>
											</select>
										</span></td>
									</tr>
								</tbody>
							</table>

						</div>
						<div class="modal-footer">
							<button class="btn btn-primary" type="submit">确定</button>
							<button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
		<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
		<script type="text/javascript"
			src="static/h-ui.admin/js/H-ui.admin.js"></script>

		<script type="text/javascript"
			src="lib/jquery.validation/1.14.0/jquery.validate.js"></script>
		<script type="text/javascript"
			src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
		<script type="text/javascript"
			src="lib/jquery.validation/1.14.0/messages_zh.js"></script>

		<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
		<script type="text/javascript">
			var openPage = function(title, url) {
				var index = layer.open({
					type : 2,
					title : title,
					content : url
				});
				layer.full(index);
			}
			var updateSettings = function(versionId, name) {
				if (versionId && name) {
					$("#websiteSetting").find("input[name='versionId']").val(
							versionId);
					$("#websiteSetting").find("input[name='name']").val(name);
					$("#websiteSetting").modal("show");
				} else {
					layer.msg("参数有误!", {
						icon : 1,
						time : 1500
					});
				}
			}
			var stopUsing = function(versionId, name) {
				if (versionId && name) {
					layer.confirm('确认停用站点所有“服务”吗？', {
						btn : [ '确定', '放弃' ],
						icon : 0
					}, function() {
						$.ajax({url:"",type:"patch",data:{versionId:versionId,name:name}}).done(function(data){
							if(data&&data.message){
								layer.msg(data.message, {
									time : 1000,
									icon : 1
								});
							}else{
								layer.msg('操作成功!', {
									time : 1000,
									icon : 1
								});
							}
						}).fail(function(){
							layer.msg('请求失败', {
								icon : 5,
								time : 1000
							});
						});
					});
				} else {
					layer.msg("参数有误!", {
						icon : 1,
						time : 1500
					});
				}
			}
		</script>
		<script type="text/javascript">
			$(function() {
				$("#form").validate({
					rules : {
						searchS : {
							required : true,
						},
						onlineWormS:{
							required : true
						},schduleWormS:{
							required : true
						},designWormS:{
							required : true
						},
						secS : {
							required : true
						},
						webAnyS : {
							required : true
						},
						webSortS : {
							required : true
						}
					},
					onkeyup : false,
					focusCleanup : true,
					success : "valid",
					submitHandler : function(form) {
						// 判断依赖默认版本是否点击，点击需要选择版本
						layer.confirm('确认修改吗？', {
							btn : [ '确定', '放弃' ],
							icon : 0
						}, function() {
							$(form).ajaxSubmit({
								url : "/add",
								type : "patch",
								success : function(data) {
									if (data.message) {
										layer.msg(data.message, {
											time : 1000,
											icon : 1
										});
									} else {
										layer.msg('修改成功!', {
											time : 1000,
											icon : 1
										});
									}
									$("#websiteSetting").modal("hide");
								},
								error : function() {
									layer.msg('请求失败', {
										icon : 5,
										time : 1000
									});
								}
							});
						})
					}
				});
			})
		</script>
</body>
</html>
