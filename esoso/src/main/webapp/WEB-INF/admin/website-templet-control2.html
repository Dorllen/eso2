<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css"
	href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css"
	href="lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<title>建材列表</title>
<link rel="stylesheet" href="lib/zTree/v3/css/zTreeStyle/zTreeStyle.css"
	type="text/css">
</head>
<body class="pos-r">
	<div class="pos-a"
		style="width: 200px; left: 0; top: 0; bottom: 0; height: 100%; border-right: 1px solid #e5e5e5; background-color: #f5f5f5; overflow: auto;">
		<ul id="treeDemo" class="ztree"></ul>
	</div>
	<div style="margin-left: 200px;">
		<div class="page-container">
			<div class="text-l mt-20 mb-20">

				站点名称： <input type="text" name="" id="" style="width: 250px"
					class="input-text" placeholder="segmentfault|github">
				<button name="" id="" class="btn btn-success" type="submit">
					<i class="Hui-iconfont">&#xe665;</i> 搜索
				</button>
				<a class="btn btn-primary radius"
					style="float: right; margin-right: 20px"
					onclick="website_add('新增模板','website-add.html')"
					href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 新增模板</a> <a
					class="btn btn-primary radius"
					style="float: right; margin-right: 20px"
					onclick="website_add('新增版本','website-add.html')"
					href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 新增版本</a>
			</div>
			<div class="panel panel-primary pb-30">
				<div class="panel-header">站点列表</div>
				<div class="panel-body">
					<table
						class="table table-border table-bordered table-bg mb-15 table-hover table-sort">
						<thead class="text-c">
							<tr>
								<th>服务名</th>
								<th>类型</th>
								<th>站点名</th>
								<th>版本号</th>
								<th>JS地址</th>
								<th>模板地址</th>
								<th>CSS地址</th>
								<th>使用中</th>
								<th>操作</th>
							</tr>
						</thead>
						<tbody class="text-c">
							<tr>
								<td>engine</td>
								<td>answer</td>
								<td>segmentfault</td>
								<td>0.0.0.0</td>
								<td><abbr
									title="js/websites/segmentfault/0.0.0.0/defaults.js"
									class="text-overflow"
									style="width: 100px; display: inline-block">js/websites/segmentfault/0.0.0.0/defaults.js</abbr></td>
								<td><abbr title="websites/segmentfault/0.0.0.0/index"
									class="text-overflow"
									style="width: 100px; display: inline-block">websites/segmentfault/0.0.0.0/index</abbr></td>
								<td><abbr
									title="css/websites/segmentfault/0.0.0.0/global.css,css/websites/segmentfault/0.0.0.0/qa.css,css/websites/segmentfault/0.0.0.0/info.css"
									class="text-overflow"
									style="width: 100px; display: inline-block">css/websites/segmentfault/0.0.0.0/global.css,css/websites/segmentfault/0.0.0.0/qa.css,css/websites/segmentfault/0.0.0.0/info.css</abbr></td>

								<td>是</td>
								<td><input class="btn btn-primary radius" type="button"
									value="变更" onclick="updateSettings()"></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<div id="websiteSetting" class="modal fade" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content radius">
				<div class="modal-header">
					<h3 class="modal-title">服務设置</h3>
					<a class="close" data-dismiss="modal" aria-hidden="true"
						href="javascript:void();">×</a>
				</div>
				<div class="modal-body">
					<form action="#">
						<table class="table table-border table-bordered table-hover">
							<thead>
								<tr>
									<th>服务名称</th>
									<th>开启状态</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>搜索服务</td>
									<td><span class="select-box"> <select
											class="select" size="1" name="demo1">
												<option value="0">否</option>
												<option value="1" selected>是</option>
										</select>
									</span></td>
								</tr>
								<tr>
									<td>直接访问</td>
									<td><span class="select-box"> <select
											class="select" size="1" name="demo1">
												<option value="0">否</option>
												<option value="1" selected>是</option>
										</select>
									</span></td>
								</tr>
								<tr>
									<td>安全访问</td>
									<td><span class="select-box"> <select
											class="select" size="1" name="demo1">
												<option value="0">否</option>
												<option value="1" selected>是</option>
										</select>
									</span></td>
								</tr>
								<tr>
									<td>站點分析</td>
									<td><span class="select-box"> <select
											class="select" size="1" name="demo1">
												<option value="0">否</option>
												<option value="1" selected>是</option>
										</select>
									</span></td>
								</tr>
								<tr>
									<td>排名服務</td>
									<td><span class="select-box"> <select
											class="select" size="1" name="demo1">
												<option value="0">否</option>
												<option value="1" selected>是</option>
										</select>
									</span></td>
								</tr>
							</tbody>
						</table>
					</form>
				</div>
				<div class="modal-footer">
					<button class="btn btn-primary">确定</button>
					<button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
				</div>
			</div>
		</div>
	</div>

	<!--_footer 作为公共模版分离出去-->
	<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
	<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
	<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script>
	<!--/_footer 作为公共模版分离出去-->

	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript"
		src="lib/zTree/v3/js/jquery.ztree.all-3.5.min.js"></script>
	<script type="text/javascript"
		src="lib/My97DatePicker/4.8/WdatePicker.js"></script>
	<script type="text/javascript"
		src="lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="lib/laypage/1.2/laypage.js"></script>
	<script type="text/javascript">
		var setting = {
			view : {
				dblClickExpand : false,
				showLine : false,
				selectedMulti : false
			},
			data : {
				simpleData : {
					enable : true,
					idKey : "id",
					pIdKey : "pId",
					rootPId : ""
				}
			},
			callback : {
				beforeClick : function(treeId, treeNode) {
					var zTree = $.fn.zTree.getZTreeObj("tree");
					if (treeNode.isParent) {
						zTree.expandNode(treeNode);
						return false;
					} else {
						//demoIframe.attr("src",treeNode.file + ".html");
						return true;
					}
				}
			}
		};

		var zNodes = [ {
			id : 1,
			pId : 0,
			name : "一级分类",
			open : true
		}, {
			id : 11,
			pId : 1,
			name : "二级分类"
		}, {
			id : 111,
			pId : 11,
			name : "三级分类"
		}, {
			id : 112,
			pId : 11,
			name : "三级分类"
		}, {
			id : 113,
			pId : 11,
			name : "三级分类"
		}, {
			id : 114,
			pId : 11,
			name : "三级分类"
		}, {
			id : 115,
			pId : 11,
			name : "三级分类"
		}, {
			id : 12,
			pId : 1,
			name : "二级分类 1-2"
		}, {
			id : 121,
			pId : 12,
			name : "三级分类 1-2-1"
		}, {
			id : 122,
			pId : 12,
			name : "三级分类 1-2-2"
		}, ];

		$(document).ready(function() {
			var t = $("#treeDemo");
			t = $.fn.zTree.init(t, setting, zNodes);
			//demoIframe = $("#testIframe");
			//demoIframe.on("load", loadReady);
			var zTree = $.fn.zTree.getZTreeObj("tree");
			//zTree.selectNode(zTree.getNodeByParam("id",'11'));
		});

		$('.table-sort').dataTable({
			"aaSorting" : [ [ 1, "desc" ] ],//默认第几个排序
			"bStateSave" : true,//状态保存
			"aoColumnDefs" : [ {
				"orderable" : false,
				"aTargets" : [ 0, 7 ]
			} // 制定列不参与排序
			]
		});
		/*产品-添加*/
		function product_add(title, url) {
			var index = layer.open({
				type : 2,
				title : title,
				content : url
			});
			layer.full(index);
		}
		/*产品-查看*/
		function product_show(title, url, id) {
			var index = layer.open({
				type : 2,
				title : title,
				content : url
			});
			layer.full(index);
		}
		/*产品-审核*/
		function product_shenhe(obj, id) {
			layer
					.confirm(
							'审核文章？',
							{
								btn : [ '通过', '不通过' ],
								shade : false
							},
							function() {
								$(obj)
										.parents("tr")
										.find(".td-manage")
										.prepend(
												'<a class="c-primary" onClick="product_start(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
								$(obj)
										.parents("tr")
										.find(".td-status")
										.html(
												'<span class="label label-success radius">已发布</span>');
								$(obj).remove();
								layer.msg('已发布', {
									icon : 6,
									time : 1000
								});
							},
							function() {
								$(obj)
										.parents("tr")
										.find(".td-manage")
										.prepend(
												'<a class="c-primary" onClick="product_shenqing(this,id)" href="javascript:;" title="申请上线">申请上线</a>');
								$(obj)
										.parents("tr")
										.find(".td-status")
										.html(
												'<span class="label label-danger radius">未通过</span>');
								$(obj).remove();
								layer.msg('未通过', {
									icon : 5,
									time : 1000
								});
							});
		}
		/*产品-下架*/
		function product_stop(obj, id) {
			layer
					.confirm(
							'确认要下架吗？',
							function(index) {
								$(obj)
										.parents("tr")
										.find(".td-manage")
										.prepend(
												'<a style="text-decoration:none" onClick="product_start(this,id)" href="javascript:;" title="发布"><i class="Hui-iconfont">&#xe603;</i></a>');
								$(obj)
										.parents("tr")
										.find(".td-status")
										.html(
												'<span class="label label-defaunt radius">已下架</span>');
								$(obj).remove();
								layer.msg('已下架!', {
									icon : 5,
									time : 1000
								});
							});
		}

		/*产品-发布*/
		function product_start(obj, id) {
			layer
					.confirm(
							'确认要发布吗？',
							function(index) {
								$(obj)
										.parents("tr")
										.find(".td-manage")
										.prepend(
												'<a style="text-decoration:none" onClick="product_stop(this,id)" href="javascript:;" title="下架"><i class="Hui-iconfont">&#xe6de;</i></a>');
								$(obj)
										.parents("tr")
										.find(".td-status")
										.html(
												'<span class="label label-success radius">已发布</span>');
								$(obj).remove();
								layer.msg('已发布!', {
									icon : 6,
									time : 1000
								});
							});
		}

		/*产品-申请上线*/
		function product_shenqing(obj, id) {
			$(obj).parents("tr").find(".td-status").html(
					'<span class="label label-default radius">待审核</span>');
			$(obj).parents("tr").find(".td-manage").html("");
			layer.msg('已提交申请，耐心等待审核!', {
				icon : 1,
				time : 2000
			});
		}

		/*产品-编辑*/
		function product_edit(title, url, id) {
			var index = layer.open({
				type : 2,
				title : title,
				content : url
			});
			layer.full(index);
		}

		/*产品-删除*/
		function product_del(obj, id) {
			layer.confirm('确认要删除吗？', function(index) {
				$.ajax({
					type : 'POST',
					url : '',
					dataType : 'json',
					success : function(data) {
						$(obj).parents("tr").remove();
						layer.msg('已删除!', {
							icon : 1,
							time : 1000
						});
					},
					error : function(data) {
						console.log(data.msg);
					},
				});
			});
		}
	</script>
</body>
</html>