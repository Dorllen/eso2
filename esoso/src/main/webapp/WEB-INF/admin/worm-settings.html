<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css"
	href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css"
	href="lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<style type="text/css">
@media screen and (min-width:768px) {
	div.modal-dialog {
		width: 80%;
	}
}
</style>

<title>爬虫设置</title>
</head>
<body>
	<div class="page-container">
		<div class="HuiTab" id="settings" style="min-height: 600px">
			<div class="tabBar clearfix">
				<span>站点管理</span><span>全局信息</span>
			</div>
			<div class="tabCon">
				<div class="text-c mt-20">
					站点名称： <input type="text" name="" id="search_text"
						style="width: 250px" class="input-text"
						placeholder="segmentfault|github" autocomplete="off" />
					<button name="" id="search_button" class="btn btn-success"
						type="submit">
						<i class="Hui-iconfont">&#xe665;</i> 搜索
					</button>
					<a class="btn btn-primary radius"
						style="float: right; margin-right: 20px"
						onclick="website_add('新增站点','website-add.html')"
						href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 新增站点</a>
				</div>
				<div class="cl pd-5 bg-1 bk-gray mt-20">
					<span class="l"><a class="btn btn-primary radius"
						onclick="website_item_add('新增规则','website-item-add.html')"
						href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 新增规则</a>
					</span> <span class="r" id="numberspan" style="display: none">共有：<strong
						id="numbers">1</strong> 条
					</span>
				</div>

				<div id="tx" class="cl pd-5 bk-gray mt-15">
					<table
						class="table table-border table-bg table-bordered table-hover">
						<thead>
							<tr>
								<th class="f-20"><i class="Hui-iconfont">&#xe6e0;</i>提醒!</th>
							</tr>
						</thead>
						<tbody>
							<tr class="warning">
								<td class="f-16 text-c">請輸入站點名称進行搜索!</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div id="content" class="cl pd-5 bk-gray mt-15"
					style="display: none">
					<table
						class="table table-border table-bordered table-bg mt-15 table-hover">
						<thead>
							<tr>
								<th colspan="9" scope="col">站点：<span
									class="mr-10 ml-10 f-16" style="color: #f75809;"
									id="websiteName">segmentfault</span> 版本信息
								</th>
							</tr>
							<tr class="text-c">
								<th>站点名</th>
								<th>版本名</th>
								<th>创建时间</th>
								<th>创建人</th>
								<th>描述</th>
								<th>最近更新时间</th>
								<th>更新人</th>
								<th>是否在用</th>
								<th>操作</th>
							</tr>
						</thead>
						<tbody class="text-c">
							<tr>
								<td>segmentfault</td>
								<td>0.0.0.0</td>
								<td>2017-4-28 13:22</td>
								<td>Admin</td>
								<td><abbr title="新版本2016版，用于解决样式出现特殊异常！"
									class="initialism text-overflow"
									style="width: 80px; display: inline-block">新版本2016版，用于解决样式出现特殊异常！</abbr></td>
								<td>2017-4-28 13:22</td>
								<td>Admin</td>
								<td><input type="checkbox" id="radio1" checked /></td>
								<td><input class="btn btn-success radius" type="button"
									value="具体内容" onClick="getInfo()" /> <input
									class="btn btn-primary radius" type="button" value="修改"
									onClick="updateInfo()" /> <input
									class="btn radius btn-warning" type="button" value="设为默认"
									onClick="setDefault(this)" /></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div class="tabCon">
				<h4 class="text-success text-l mb-20">服务默认信息</h4>
				<table
					class="table table-border table-bordered table-bg mb-15 table-hover">
					<thead>
						<tr>
							<th colspan="4" scope="col">请求头</th>
						</tr>
						<tr>
							<th colspan="1" class="text-c">name</th>
							<th colspan="1" class="text-c">value</th>
							<th colspan="1" class="text-c">name</th>
							<th colspan="1" class="text-c">value</th>
						</tr>
					</thead>
					<tbody>
						<tr class="text-c">
							<th>9</th>
							<th>0</th>
							<th>8</th>
							<th>20</th>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
					</tbody>
				</table>


				<hr class="mt-20 mb-20" />

				<table
					class="table table-border table-bordered table-bg mt-15 table-hover">
					<thead>
						<tr>
							<th colspan="4" scope="col">服务配置</th>
						</tr>
						<tr>
							<th colspan="1" class="text-c">name</th>
							<th colspan="1" class="text-c">value</th>
							<th colspan="1" class="text-c">name</th>
							<th colspan="1" class="text-c">value</th>
						</tr>
					</thead>
					<tbody>
						<tr class="text-c">
							<th>9</th>
							<th>0</th>
							<th>8</th>
							<th>20</th>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
						<tr class="text-c">
							<td>0</td>
							<td>0</td>
							<td>0</td>
							<td>0</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div id="websiteInfo" class="modal fade" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content radius">
				<div class="modal-header">
					<h3 class="modal-title">版本内容詳情</h3>
					<a class="close" data-dismiss="modal" aria-hidden="true"
						href="javascript:void();">×</a>
				</div>
				<div class="modal-body">
					<table class="table table-border table-bordered table-hover">
						<thead>
							<tr>
								<th>名稱</th>
								<th>内容</th>
								<th>名稱</th>
								<th>内容</th>
								<th>名稱</th>
								<th>内容</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>站點名</td>
								<td class="_name">segmentfault</td>
								<td>版本号</td>
								<td class="_version">0.0.0.3</td>
								<td>別名</td>
								<td class="_alias">sm,segment</td>
							</tr>
							<tr>
								<td>类型</td>
								<td class="_type">engine</td>
								<td>創建時間</td>
								<td class="_cTime">2017-4-29 13:02</td>
								<td>創建人</td>
								<td class="_cMan">Admin</td>
							</tr>
							<tr>
								<td>短地址</td>
								<td colspan="5" class="_shortAddr">segmentfault.com</td>
							</tr>
							<tr>
								<td>全地址</td>
								<td colspan="5" class="_fullAddr">https://www.segmentfault.com</td>
							</tr>
							<tr>
								<td>是否在用</td>
								<td class="_use">否</td>
								<td>禁用时间</td>
								<td class="_unuseTime">2017-4-29 21:35</td>
								<td>禁用人</td>
								<td class="_unuseMan">Admin</td>
							</tr>
							<tr>
								<td>搜索地址</td>
								<td colspan="5" class="_sAddr">https://segmentfault.com/search?q=</td>
							</tr>
							<tr>
								<td>分頁符</td>
								<td colspan="5" class="_page">&page={0}</td>
							</tr>
							<tr>
								<td>更新時間</td>
								<td class="_uTime">2017-4-29 21:35</td>
								<td>更新人</td>
								<td class="_uMan">Admin</td>
								<td>使用后缀</td>
								<td class="_hZ">否</td>
							</tr>
							<tr>
								<td>详情頁處理器</td>
								<td colspan="5" class="_c1">com.zhidian.bases.worms.processor.SegmentFaultPageProcessor</td>
							</tr>
							<tr>
								<td>详情页接收器</td>
								<td colspan="5" class="_c2">com.zhidian.bases.worms.pipeline.NullPipeline</td>
							</tr>
							<tr>
								<td>详情页接收对象</td>
								<td colspan="5" class="_c3">com.zhidian.model.websites.answer.SegmentfaultPageRObject</td>
							</tr>
							<tr>
								<td>结果页处理器</td>
								<td colspan="5" class="_c4">com.zhidian.bases.worms.processor.SegmentFaultResultProcessor</td>
							</tr>
							<tr>
								<td>結果頁接受器</td>
								<td colspan="5" class="_c5">com.zhidian.bases.worms.pipeline.NullPipeline</td>
							</tr>
							<tr>
								<td>結果頁接收对象</td>
								<td colspan="5" class="_c6">无</td>
							</tr>
							<tr>
								<td>站點默認Css</td>
								<td colspan="5" class="_c7">无</td>
							</tr>
							<tr>
								<td>入口頁爬取配置</td>
								<td colspan="5" class="_c8">无</td>
							</tr>
							<tr>
								<td>详情頁爬取配置</td>
								<td colspan="5" class="_c9">无</td>
							</tr>
							<tr>
								<td>Css爬取設置</td>
								<td colspan="5" class="_c10">[{"name":"qa.css","url":"http://segmentfault.con/static/css/qa.css","useSearch":false,"version":"0.0.0.0","website":"segmentfault"},{"name":"qa.css","url":"http://segmentfault.con/static/css/global.css","useSearch":false,"version":"0.0.0.0","website":"segmentfault"}]</td>
							</tr>
							<tr>
								<td>自定义请求头</td>
								<td colspan="5" class="_c11">无</td>
							</tr>
							<tr>
								<td>描述</td>
								<td colspan="5" class="_c12">這是默认版本。無論是否处于关闭状态，页面解析无定义解析版本，都会指向它</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="modal-footer">
					<button class="btn btn-primary" onclick="confirm()">确定</button>
					<button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
				</div>
			</div>
		</div>
	</div>
	<div id="websiteUpdate" class="modal fade" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content radius">
				<div class="modal-header">
					<h3 class="modal-title">内容詳情</h3>
					<a class="close" data-dismiss="modal" aria-hidden="true"
						href="javascript:void();">×</a>
				</div>
				<div class="modal-body">
					<form action="#" id="websiteForm">
						<input type="hidden" name="id" value="" class="_id" /> <input
							type="hidden" name="name" value="" class="_name" />
						<table class="table table-border table-bordered table-hover">
							<thead>
								<tr>
									<th>名稱</th>
									<th>内容</th>
									<th>名稱</th>
									<th>内容</th>
									<th>名稱</th>
									<th>内容</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>站點名</td>
									<td class="_name">segmentfault</td>
									<td>版本号</td>
									<td class="_version">0.0.0.5</td>
									<td>別名</td>
									<td class="_alias"><input type="text" value="sm,segment"
										name="alias" class="input-text" placeholder="以‘,’间隔" /></td>
								</tr>
								<tr>
									<td>类型</td>
									<td class="_type">engine</td>
									<td>創建時間</td>
									<td class="_cTime">2017-4-29 13:02</td>
									<td>創建人</td>
									<td class="_cMan">Admin</td>
								</tr>
								<tr>
									<td>短地址</td>
									<td colspan="5" class="_shortAddr"><input type="text"
										class="input-text" value="segmentfault.com" name="shortAddr"
										placeholder="以‘,’间隔" /></td>
								</tr>
								<tr>
									<td>全地址</td>
									<td colspan="5" class="_fullAddr"><input type="text"
										class="input-text" value="https://www.segmentfault.com"
										name="fullAddr" placeholder="仅存一个，最全的地址" /></td>
								</tr>
								<tr>
									<td><span class="c-red">*</span>是否在用</td>
									<td class="_use"></td>
									<td>禁用时间</td>
									<td class="_unuseTime">2017-4-29 21:35</td>
									<td>禁用人</td>
									<td class="_unuseMan">Admin</td>
								</tr>
								<tr>
									<td><span class="c-red">*</span>搜索地址</td>
									<td colspan="5" class="_sAddr"><input type="text"
										value="https://segmentfault.com/search?q=" name="searchAddr"
										class="input-text"
										placeholder="搜索入口,如:https://segmentfault.com/search?q=" /></td>
								</tr>
								<tr>
									<td>分頁符</td>
									<td colspan="5" class="_page"><input type="text"
										value="&page={0}" class="input-text" name=""
										placeholder="分页核心部分,如:&page={0}" /></td>
								</tr>
								<tr>
									<td>更新時間</td>
									<td class="_uTime">2017-4-29 21:35</td>
									<td>更新人</td>
									<td class="_uMan">Admin</td>
									<td><span class="c-red">*</span>使用后缀</td>
									<td class="_hZ"></td>
								</tr>
								<tr>
									<td><span class="c-red">*</span>详情頁處理器</td>
									<td colspan="3" class="_c1"><input type="text"
										class="input-text" value="" name="pageProcessor"
										placeholder="详情页数据解析器的包名字符串,不可为空!" /></td>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td>详情页接收器</td>
									<td colspan="3" class="_c2"><input type="text"
										class="input-text" value="" name="pagePipeline"
										placeholder="详情页数据处理器的包名字符串,不可为空!" /></td>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td><span class="c-red">*</span>详情页接收对象</td>
									<td colspan="3" class="_c3"><input type="text"
										class="input-text" value="" name="pageRObject"
										placeholder="详情页传递对象的包名字符串,不可为空!" /></td>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td><span class="c-red">*</span>结果页处理器</td>
									<td colspan="3" class="_c4"><input type="text"
										class="input-text" value="" name="resultProcessor"
										placeholder="结果页数据解析器的包名字符串,不可为空!" /></td>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td>結果頁接受器</td>
									<td colspan="3" class="_c5"><input type="text" id="resultPipeline"
										class="input-text" value="" name="resultPipeline"
										placeholder="结果页数据处理器的包名字符串" /></td>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td>結果頁接收对象</td>
									<td colspan="3" class="_c6"><input type="text" value=""
										name="resultRObject" class="input-text" id="resultRObject"
										placeholder="结果页数据传递对象(暂可为空)" /></td>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td>站點默認Css</td>
									<td colspan="5" class="_c7"><textarea
											class="textarea radius" placeholder="站点默认Css.以‘,’间隔"
											name="defPageCss"></textarea></td>
								</tr>
								<tr>
									<td>入口頁爬取配置</td>
									<td colspan="5" class="_c8"><textarea rows="" cols="" id="defResultConfig"
											class="textarea radius" name="defResultConfig"
											placeholder="入口爬取配置。请按WebsiteConfigModel的JSON格式"></textarea></td>
								</tr>
								<tr>
									<td>详情頁爬取配置</td>
									<td colspan="5" class="_c9"><textarea rows="" cols="" id="defPageConfig"
											class="textarea radius" name="defPageConfig"
											placeholder="详情页爬取规配置。请按WebsiteConfigModel的JSON格式"></textarea></td>
								</tr>
								<tr>
									<td>Css爬取設置</td>
									<td colspan="5" class="_c10"><textarea
											class="textarea radius" name="defaultPageCss" id="defaultPageCss"
											placeholder="站点Css爬取规则。请按WebsiteCssConfigModel的JSON格式">[{"name":"qa.css","url":"http://segmentfault.con/static/css/qa.css","useSearch":false,"version":"0.0.0.0","website":"segmentfault"},{"name":"qa.css","url":"http://segmentfault.con/static/css/global.css","useSearch":false,"version":"0.0.0.0","website":"segmentfault"}]</textarea></td>
								</tr>
								<tr>
									<td>自定义请求头</td>
									<td colspan="5" class="_c11"><textarea
											name="defRequestHeader" class="textarea radius"
											placeholder="请按规则定义。注意Cookie的JSON格式"></textarea></td>
								</tr>
								<tr>
									<td>描述</td>
									<td colspan="5" class="_c12"><textarea name="sign"
											class="textarea radius" placeholder="描述该版本，请勿备注">這是默认版本。無論是否处于关闭状态，页面解析无定义解析版本，都会指向它</textarea></td>
								</tr>
							</tbody>
						</table>
					</form>
				</div>
				<div class="modal-footer">
					<button class="btn btn-primary" onclick="submitForm()">确定</button>
					<button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
				</div>
			</div>
		</div>
	</div>

	<!--_footer 作为公共模版分离出去-->
	<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>

	<!--/_footer 作为公共模版分离出去-->
	<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
	<script type="text/javascript">
		var submitForm = function() {
			$.ajax({
				url : "website/info/updateWebsite",
				type : "post",
				data : $("#websiteForm").serialize()
			}).done(function(data) {
				if (data && data.message) {
					if (200 == data.code) {
						$("#websiteUpdate").modal("hide");
					}
					$.Huimodalalert(data.message, 2000);
				}
			}).fail(function() {
				$.Huimodalalert('更新失敗!', 2000);
			})
		}

		var confirm = function() {
			$("#websiteInfo").modal("hide");
		}

		var setDefault = function(id, name) {
			$.post("website/info/setDefaultWebsite", {
				id : id,
				name : name
			}).done(function(data) {
				if (data && data.message) {
					startSearch();
					$.Huimodalalert(data.message, 2000);
				}
			}).fail(function() {
				$.Huimodalalert('设置失敗!', 2000);
			})
		}
		var deleteWebsite = function(id){
			$.ajax({url:"website/delete/"+id,type:"delete"}).done(function(data){
				if(data&&data.message){
					$.Huimodalalert(data.message, 2000);
				}
			}).fail(function(){
				$.Huimodalalert('操作失敗!', 2000);
			})
		}
	</script>

	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript">
		function website_add(title, url) {
			var index = layer.open({
				type : 2,
				title : title,
				content : url
			});
			layer.full(index);
		}
		function website_item_add(title, url) {
			var index = layer.open({
				type : 2,
				title : title,
				content : url
			});
			layer.full(index);
		}
		function addVersion(title, url) {
			var index = layer.open({
				type : 2,
				title : title,
				content : url
			});
			layer.full(index);
		}
		function getInfo(id, name) {
			$.ajax({
				url : "website/info/detail",
				type : "get",
				data : {
					id : id,
					name : name
				}
			}).done(function(data) {
				if (data && data.item) {
					var i = data.item;
					var $p = $("#websiteInfo");
					$p.find("td[class]").empty();// 重置
					$("#websiteInfo").modal("show");
					initInfoDialog($p, i);
				}
			}).fail(function() {
				$.Huimodalalert('联网失败!', 2000);
			})
		}

		function initInfoDialog($p, i) {
			$p.find("._name").html(i.name);
			$p.find("._version").html(i.version);
			$p.find("._alias").html(i.alias ? i.alias : '无');
			$p.find("._type").html(i.type);
			$p.find("._cTime").html(i.createTime);
			$p.find("._cMan").html(i.createMan ? i.createMan : '无');
			$p.find("._shortAddr").html(i.shortAddr ? i.shortAddr : '无');
			$p.find("._fullAddr").html(i.fullAddr ? i.fullAddr : '无');
			$p.find("._use").html(i.using ? '是' : '否');
			$p.find("._unuseTime").html(i.unuseTime ? i.unuseTime : '无');

			$p.find("._unuseMan").html(i.unuseMan ? i.unuseMan : '无');
			$p.find("._sAddr").html(i.searchAddr ? i.searchAddr : '无');
			$p.find("._page").html(i.pagination ? i.pagination : '无');
			$p.find("._uTime").html(i.updateTime ? i.updateTime : '无');
			$p.find("._uMan").html(i.updateMan ? i.updateMan : '无');
			$p.find("._hZ").html(i.useSearch ? '是' : '否');

			$p.find("._c1").html(i.pageProcessor ? i.pageProcessor : '无');
			$p.find("._c2").html(i.pagePipeline ? i.pagePipeline : '无');
			$p.find("._c3").html(i.pageRObject ? i.pageRObject : '无');
			$p.find("._c4").html(i.resultProcessor ? i.resultProcessor : '无');

			$p.find("._c5").html(i.resultPipeline ? i.resultPipeline : '无');
			$p.find("._c6").html(i.resultRObject ? i.resultRObject : '无');
			$p.find("._c7").html(i.defPageCss ? i.defPageCss : '无');
			$p.find("._c8").html(i.defResultConfig ? i.defResultConfig : '无');
			$p.find("._c9").html(i.defPageConfig ? i.defPageConfig : '无');
			$p.find("._c10").html(i.defaultPageCss ? i.defaultPageCss : '无');
			$p.find("._c11")
					.html(i.defRequestHeader ? i.defRequestHeader : '无');
			$p.find("._c12").html(i.sign ? i.sign : '无');
		}

		function updateInfo(id, name) {
			$.ajax({
				url : "website/info/detail",
				type : "get",
				data : {
					id : id,
					name : name
				}
			}).done(function(data) {
				if (data && data.item) {
					var i = data.item;
					var $p = $("#websiteUpdate");
					$("#websiteUpdate").modal("show")
					$p.find("td[class] input,td[class] textarea").val("");
					initUpdateDialog($p, i);
				}
			}).fail(function() {
				$.Huimodalalert('联网失败!', 2000);
			})
		}
		function initUpdateDialog($p, i) {
			$p.find("input._id").val(i.id);
			$p.find("input._name").val(i.name);
			$p.find("td._name").html(i.name);
			$p.find("._version").html(i.version);
			$p.find("._alias input").val(i.alias ? i.alias : '');
			$p.find("._type").html(i.type);
			$p.find("._cTime").html(i.createTime);
			$p.find("._cMan").html(i.createMan ? i.createMan : '无');
			$p.find("._shortAddr input").val(i.shortAddr ? i.shortAddr : '');
			$p.find("._fullAddr input").val(i.fullAddr ? i.fullAddr : '');
			$p.find("._use").html(i.using ? '是' : '否');
			$p.find("._unuseTime").html(i.unuseTime ? i.unuseTime : '无');

			$p.find("._unuseMan").html(i.unuseMan ? i.unuseMan : '无');
			$p.find("._sAddr input").val(i.searchAddr ? i.searchAddr : '');
			$p.find("._page input").val(i.pagination ? i.pagination : '');
			$p.find("._uTime").html(i.updateTime ? i.updateTime : '无');
			$p.find("._uMan").html(i.updateMan ? i.updateMan : '无');
			$p.find("._hZ").empty();
			var $s_ = $("<span class='select-box'></span>");
			var $s1_ = $("<select class='select' size='1' name='useSearch'></select>");
			var $o1_ = $("<option value='0' >否</option>");
			var $o2_ = $("<option value='1' >是</option>");
			if (i.useSearch) {
				$o2_.prop("selected", true);
			} else {
				$o1_.prop("selected", true);
			}
			$s1_.append($o1_);
			$s1_.append($o2_);
			$s_.append($s1_);
			$p.find("._hZ").append($s_);

			$p.find("._c1 input").val(i.pageProcessor ? i.pageProcessor : '');
			$p.find("._c2 input").val(i.pagePipeline ? i.pagePipeline : '');
			$p.find("._c3 input").val(i.pageRObject ? i.pageRObject : '');
			$p.find("._c4 input").val(
					i.resultProcessor ? i.resultProcessor : '');

			$p.find("._c5 input").val(i.resultPipeline ? i.resultPipeline : '');
			$p.find("._c6 input").val(i.resultRObject ? i.resultRObject : '');
			$p.find("._c7 textarea").val(i.defPageCss ? i.defPageCss : '');
			$p.find("._c8 textarea").val(
					i.defResultConfig ? i.defResultConfig : '');
			$p.find("._c9 textarea")
					.val(i.defPageConfig ? i.defPageConfig : '');
			$p.find("._c10 textarea").val(
					i.defaultPageCss ? i.defaultPageCss : '');
			$p.find("._c11 textarea").val(
					i.defRequestHeader ? i.defRequestHeader : '');
			$p.find("._c12 textarea").val(i.sign ? i.sign : '');
		}

		$(function() {
			$.Huitab("#settings .tabBar span", "#settings .tabCon", "current",
					"click", "0");

		});
	</script>
	<link rel="stylesheet" href="css/jquery-ui.css" />
	<script type="text/javascript" src="js/jquery-ui.js"></script>
	<script type="text/javascript">
		var websites = [ "segmentfault", "github", "cnblog" ];
		var isClicked = false;
		var defauntkeyword = "请输入关键词";
		$("#search_text").autocomplete({
			source : websites
		});

		$("#search_text").keydown(function(e) {
			if (e.keyCode == 13) {
				e.preventDefault();
				startSearch();
			}
		});
		$("#search_button").click(function() {
			startSearch();
			return false;
		});

		 var startSearch =  function() {
			var keys = trim($("#search_text").val());
			keys = trim(keys);
			if (keys) {
				//window.location.href = '/pic/lists-10-w11/';
				$
						.ajax({
							url : 'website/info/part',
							data : {name:keys},
							type : 'get'
						})
						.done(
								function(data) {
									if (data != null) {
										if (data.message) {
											$.Huimodalalert(data.message, 2000);
										} else {
											if (data.items && data.total > 0) {
												$("#tx").hide();
												$("#content").show();
												var $tbody = $("#content tbody")
												$tbody.empty();
												$("#websiteName").html(
														data.items[0].name);
												$("#numberspan").show();
												$("#numbers").html(data.total);
												$
														.each(
																data.items,
																function(i, v) {
																	var $tr = $("<tr></tr>")
																	$tr
																			.append("<td>"
																					+ v.name
																					+ "</td>");
																	$tr
																			.append("<td>"
																					+ v.version
																					+ "</td>");
																	$tr
																			.append("<td>"
																					+ (v.createTime ? v.createTime
																							: '无')
																					+ "</td>");
																	$tr
																			.append("<td>"
																					+ (v.createMan ? v.createMan
																							: '无')
																					+ "</td>");
																	$tr
																			.append("<td><abbr title="
																					+ (v.sign ? v.sign
																							: '无')
																					+ "class='text-overflow'	style='width: 80px; display: inline-block'>"
																					+ (v.sign ? v.sign
																							: '无')
																					+ "</td>");
																	$tr
																			.append("<td>"
																					+ (v.updateTime ? v.updateTime
																							: '无')
																					+ "</td>");
																	$tr
																			.append("<td>"
																					+ (v.updateMan ? v.updateMan
																							: '无')
																					+ "</td>");
																	$tr
																			.append("<td>"
																					+ (v.using ? '是'
																							: '否')
																					+ "</td>");
																	$tr
																			.append("<td><input class='btn btn-success radius' type='button'	value='具体内容' onClick=\"getInfo("
																					+ v.id
																					+ ",'"
																					+ v.name
																					+ "')\" /> <input class='btn btn-primary radius' type='button' value='修改' onClick=\"updateInfo("
																					+ v.id
																					+ ",'"
																					+ v.name
																					+ "')\" /> <input class='btn radius btn-warning' type='button' value='设为默认' onClick=\"setDefault("
																					+ v.id
																					+ ",'"
																					+ v.name
																					+ "')\" /> <input class='btn btn-danger radius' type='button' onclick=\"deleteWebsite("+v.id+")\" value='删除' /></td>");
																	$tbody
																			.append($tr);
																})
											}else{
												$.Huimodalalert('未找到数据!', 2000);
											}
										}
									}
								}).fail(function(data) {
							$.Huimodalalert('联网失败!', 2000);
						});
			} else {
				$.Huimodalalert('请输入搜索关键字!', 2000);
			}
		}
		function trim(m) {
			while ((m.length > 0) && (m.charAt(0) == ' ')) {
				m = m.substring(1, m.length);
			}
			while ((m.length > 0) && (m.charAt(m.length - 1) == ' ')) {
				m = m.substring(0, m.length - 1);
			}
			return m;
		}
	</script>
</body>
</html>