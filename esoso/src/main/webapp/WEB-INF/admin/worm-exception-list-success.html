<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css"
	href="static/h-ui/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css"
	href="lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css"
	href="static/h-ui.admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->

<title>异常捕获-已处理列表</title>
</head>
<body>
	<div class="page-container">
		<div style="min-height: 600px">
			<form action="#" id="searchForm">
				<div class="text-l mt-5 bk-gray pd-5">
					站点搜索：<span class="select-box mr-10"
						style="max-width: 150px; display: inline-block"> <select
						class="select" id="type" name="type" autocomplete="off">
							<option value="website" selected>站点名称</option>
							<option value="url">URL地址</option>
					</select>
					</span><span id="changeInput" style="position:relative"><input type="text" name="value" id="search_text"
						style="width: 250px" class="input-text"
						placeholder="站点名:segmentfault" autocomplete="off" /></span>
					<button name="" id="search_button" class="btn btn-success"
						type="submit">
						<i class="Hui-iconfont">&#xe665;</i> 搜索
					</button>
				</div>
			</form>
			<table
				class="table table-border table-bordered table-bg mb-15 table-hover" id="table">
				<thead>
					<tr>
						<th colspan="11" scope="col">已处理列表</th>
					</tr>
					<tr class="text-c">
						<td>序号</td>
						<td>站点名</td>
						<td>类型</td>
						<td>入队类型</td>
						<td>属性名</td>
						<td>解析方式</td>
						<td>创建时间</td>
						<td>处理时间</td>
						<td>url</td>
						<td>描叙</td>
						<td>操作</td>
					</tr>
				</thead>
				<tbody class="text-c">
					<tr>
						<td>1</<td>
						<td>segmentfault</td>
						<td>详情页页面解析</td>
						<td>answer,websites</<td>
						<td>name</td>
						<td>xpath("\xdfds")</td>
						<td>2017-4-25 16:44</td>
						<td>2017-5-28 12:44</td>
						<td><abbr title="http://www.baidu.com"
							class="
								text-overflow"
							style="width: 100px; display: inline-block"><a
								target="_blank"
								href="item.url">http://www.baidu.com</a></abbr></td>
						<td><abbr title="http://www.baidu.com"
							class="
								text-overflow"
							style="width: 100px; display: inline-block">我是一只小小小鸟</td>
						<td><input	
							class="btn btn-success radius" type="button" value="挂起" onclick="guaqi(1,'segmentfault')" />
							<input class="btn btn-danger radius" type="button"
							value="删除" onclick="delete_(1,'segmentfault')"/>
						</td>
					</tr>
				</tbody>
			</table>
			<table
				class="table table-border table-bordered table-bg mb-15 table-hover" id="table1" style="display:none">
				<thead>
					<tr>
						<th colspan="11" scope="col">已处理列表</th>
					</tr>
					<tr class="text-c">
						<td>序号</td>
						<td>站点名</td>
						<td>类型</td>
						<td>入队类型</td>
						<td>属性名</td>
						<td>解析方式</td>
						<td>创建时间</td>
						<td>处理时间</td>
						<td>url</td>
						<td>描叙</td>
						<td>操作</td>
					</tr>
				</thead>
				<tbody  class="text-c" is="item1" v-bind:items="items" v-if="items!=null">
				</tbody>
				<tfoot class="text-c" v-if="items==null||items.length==0">
					<tr>
						<th colspan="4">数据为空...</th>
					</tr>
				</tfoot>
			</table>
		</div>
		<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
		<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
		<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>

		<script type="text/javascript" src="js/vue.min.js"></script>		
		<script type="text/javascript">
			Vue.component("item1",{
				props:["items"],
				template:"<tbody><tr v-for='item in items'><td>{{item.id}}</td><td>{{item.website}}</td><td>{{item.type}}</td><td>{{item.fromType}}</td><td>{{item.name}}</td><td>{{item.xpathContent}}</td><td>{{item.triggerTime}}</td><td>{{item.hTime}}</td><td><abbr v-bind:title='item.url' class='text-overflow'	style='width: 100px; display: inline-block'><a	target='_blank'	v-bind:href='item.url'>{{item.url}}</a></abbr></td><td><abbr v-bind:title='item.sign' class='text-overflow'	style='width: 100px; display: inline-block'>{{item.sign}}</abbr></td><td><input class=\"btn btn-success radius\" type=\"button\" value=\"挂起\" onclick=\"guaqi(item.id,item.name)\"/> <input 	class=\"btn btn-danger radius\" type=\"button\" value=\"删除\" onclick=\"delete_(item.id,item.name)\"/> </td></tr></tbody>",
				methods:{
					guaqi:function(id,name){
						guaqi(id,name);
					},
					delete_:function(id,name){
						delete_(id,name);
					}
				}
			})
			var vm1 = new Vue({
				el:"#table1",
				data:{
					items:[{name:'abd'}]
				}
			})
			
		</script>
		<script type="text/javascript">
			var guaqi  = function(id,name){
				if (id && name) {
					layer.confirm('确定挂起吗？', {
						btn : [ '确定', '放弃' ],
						icon : 0
					}, function() {
			 			$.ajax({url:"",type:"patch",data:{id:id,name:name}}).done(function(data){
			 				
			 			}).fail(function(){
			 				layer.msg('请求失败!', {
								time : 1000,
								icon : 5
							});
			 			})
					})
		 		} else {
					layer.msg("参数有误!", {
						icon : 2,
						time : 1500
					});
				}				
			}
		 	var delete_ = function(id,name){
				if (id && name) {
			 		//$("#scheduleUpdate").modal("show");
					layer.confirm('删除后数据将无法恢复，确认继续吗？', {
						btn : [ '确定', '放弃' ],
						icon : 0
					}, function() {
						
					});
		 		} else {
					layer.msg("参数有误!", {
						icon : 2,
						time : 1500
					});
				}		 		
		 	}
		</script>
		<script type="text/javascript">
			$(function(){
 				$("#searchForm").on("input","input#search_text",function(){
					var v = $(this).val();
					if(!v){
						$("#table").show();
						$("#table1").hide();
					}
				})
				$("select#type").on("change",function(){
					var value = $(this).val();
					if(value == 'url'){
						// 移除下拉列表
						$("span#changeInput input").attr("placeholder","url地址");
					}else if(value == 'website'){
						$("span#changeInput input").attr("placeholder","站点名:segmentfault");
					}
				});
			})
		</script>
		<script type="text/javascript"
			src="lib/jquery.validation/1.14.0/jquery.validate.js"></script>
		<script type="text/javascript"
			src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
		<script type="text/javascript"
			src="lib/jquery.validation/1.14.0/messages_zh.js"></script>
		<script type="text/javascript">
		$(function(){
			$("#searchForm").validate({
				rules:{
					value:{
						required:true
					},
					type:{
						required:true
					}
				},
				onkeyup:false,
				focusCleanup:true,
				success:"valid",
				submitHandler:function(form){
					$(form).ajaxSubmit({
						url:"/ss",
						type:"get",
						success:function(data){
							$("#table"),hide();
							$("#table1").show();
							if(data&&data.items){
								vm1.items = data.items;
							}
						},
						error:function(){
							layer.msg('请求失败!', {
								time : 1000,
								icon : 5
							});
						}
					})
				}
			});
		})
		</script>		
		
		<script type="text/javascript">
			var openPage = function(title,url){
				var index = layer.open({
					type : 2,
					title : title,
					content : url
				});
				layer.full(index);
			}
		</script>
</body>
</html>